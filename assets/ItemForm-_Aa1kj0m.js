import{u as g,j as e,a as N,d as w,V as n}from"./index-CSfWzNsR.js";import{C as S,a as D,e as V,d as k,b as B,B as c}from"./authApi-Cx0IF3mc.js";import{u as L,s as A,f as E,F as H,a as i,b as m,c as u,d as x,I as h,e as j}from"./input-Bn76RWPZ.js";function T({name:p="",price:f=0,submitfunc:b=N,type:r,title:F,description:C,id:o}){const t=L({resolver:A(E),defaultValues:{name:p,price:f}}),d=g(),v=async a=>{n.promise(async()=>{await b(a,o)},{loading:"Loading...",success:()=>{let s="";return r==="update"?s="Item updated successfully":s="Item created successfully",d({to:"/"}),s},error:s=>{let l="";return r==="update"?l="Failed to update item":l="Failed to create item",s.data.message||s.data.msg||l}})},y=()=>{t.reset()},I=async()=>{await w(o).then(()=>{n.success("Item deleted successfully"),d({to:"/"})}).catch(()=>{n.error("Failed to delete item")})};return e.jsxs(S,{className:"w-[90%] sm:w-1/4 shadow-md absolute top-[50%] left-[50%] -translate-1/2",children:[e.jsxs(D,{children:[e.jsx(V,{children:F}),e.jsx(k,{children:C})]}),e.jsx(B,{children:e.jsx(H,{...t,children:e.jsxs("form",{onSubmit:t.handleSubmit(v),className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{control:t.control,name:"name",render:({field:a})=>e.jsxs(m,{children:[e.jsx(u,{children:"Name"}),e.jsx(x,{children:e.jsx(h,{...a,type:"text",placeholder:"Item Name"})}),e.jsx(j,{})]})}),e.jsx(i,{control:t.control,name:"price",render:({field:a})=>e.jsxs(m,{children:[e.jsx(u,{children:"Price"}),e.jsx(x,{children:e.jsx(h,{...a,type:"number",placeholder:"0.00",value:a.value||"",onChange:s=>a.onChange(s.target.valueAsNumber)})}),e.jsx(j,{})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(c,{type:"button",onClick:y,variant:"outline",children:"Clear"}),e.jsxs("div",{className:"flex gap-3",children:[r==="update"?e.jsx(c,{type:"button",variant:"destructive",onClick:I,children:"Delete"}):"",e.jsx(c,{type:"submit",children:"Submit"})]})]})]})})})]})}export{T as I};
